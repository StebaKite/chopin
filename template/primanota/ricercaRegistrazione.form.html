<script type="text/javascript">

	var elencoFornitori = [%elenco_fornitori%];
	var elencoClienti = [%elenco_clienti%];

	$(document).ready(function(){

		$(".datepicker").datepicker();

		$("#myInput").on("keyup", 
			function() {
				var value = $(this).val().toLowerCase();
				$("#myTable tr").filter(
					function() {
						$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
					}
				);
			}
		);				
	});

</script>

<div class="container-fluid">
	<div class="panel panel-default">
		<!-- Default panel contents -->
		<div class="panel-heading">
	  
			<div class="row">
				<div class="col-sm-7">
					<h4>%titoloPagina%</h4>
				</div>
				<div class="col-sm-5">
					<div class="btn-group pull-right">				
						<button id="nuovaRegistrazione" class="btn btn-primary btn-default">%ml.nuovaregistrazione%</button>
						<button id="nuovo-incasso" class="btn btn-primary btn-default">%ml.nuovoincasso%</button>
						<button id="nuovo-pagamento" class="btn btn-primary btn-default">%ml.nuovopagamento%</button>
						<button id="nuovo-corrispettivo-mercato" class="btn btn-primary btn-default">%ml.nuovocorrispettivomercato%</button>
						<button id="nuovo-corrispettivo-negozio" class="btn btn-primary btn-default">%ml.nuovocorrispettivonegozio%</button>
					</div>	
				</div>			
			</div>
			<br/>
			<form method="post" action="%azione%">
			  
				<div class="form-group row">
					<div class="col-sm-2">
	 					<div class='input-group'>
							<span class="input-group-addon">Neg</span>
							<select class="form-control" id="codneg_sel" name="codneg_sel" >
								<option value="">%ml.tutti%</option>
								<option value="VIL" %villa-selected% >%ml.villa%</option>
								<option value="BRE" %brembate-selected% >%ml.brembate%</option>
								<option value="TRE" %trezzo-selected% >%ml.trezzo%</option>
							</select>			
						</div>
					</div>
					<div class="col-xs-3">
						<div class='input-group'>
							<span class="input-group-addon">%ml.da%</span>
				            <div class='input-group date' data-provide='datepicker' data-date-format="dd-mm-yyyy">
				                 <input type='text' class="form-control" name="datareg_da" value='%datareg_da%' />
				                 <span class="input-group-addon">
				                     <span class="glyphicon glyphicon-calendar"></span>
				                 </span>
				            </div>			
						</div>  
					</div>
					<div class="col-xs-3">
						<div class='input-group'>
							<span class="input-group-addon">%ml.a%</span>
				            <div class='input-group date' data-provide='datepicker' data-date-format="dd-mm-yyyy">
				                 <input type='text' class="form-control" name="datareg_a" value='%datareg_a%' />
				                 <span class="input-group-addon">
				                     <span class="glyphicon glyphicon-calendar"></span>
				                 </span>
							</div>
						</div>				
					</div>
					<div class="col-xs-4">
						<div class='input-group'>
							<span class="input-group-addon">%ml.codcau%</span>
							<select class="form-control" id="causale" name="causale" >
								<option value="">%ml.tutti%</option>
								%elenco_causali%
							</select>			
						</div>	
					</div>
				</div>	
				<div class="form-group row">				
					<div class="col-sm-7">
						<button id="submit" type="submit" class="btn btn-default">
					    	<span class="glyphicon glyphicon-search"></span> Ricerca
					    </button>
					</div> 
				</div> 
			</form>  
		</div>
		<div class="panel-body scrollable-panel">
		  	%risultato_ricerca%
	  	</div>
	</div>
</div>

<div class="container">
	<div class="modal fade" id="nuova-registrazione-dialog" role="dialog">
		<div class="modal-dialog modal-lg">
	      <!-- Modal content-->
			<div class="modal-content">
	        	<div class="modal-header">
	          		<h4 class="modal-title">Nuova Registrazione</h4>
	        	</div>
	        	<div class="modal-body">
	        		        	
					<form method="post" id="nuovaRegistrazioneForm" action="../primanota/creaRegistrazioneFacade.class.php?modo=go" >
					
						<div class="well well-sm">
							<div class="form-group row">
								<div class="col-sm-3">
							  		<div class="control-group" id="datareg_cre_control_group">
							    		<label for="datareg_cre">%ml.datareg%&nbsp;<small><span class="text-danger" id="datareg_cre_messaggio"></span></small></label>
										<div class='input-group date' data-provide='datepicker' data-date-format="dd/mm/yyyy">
					                		<input type='text' class="form-control" id="datareg_cre" name="datareg_cre"/>
					                		<span class="input-group-addon">
					                    		<span class="glyphicon glyphicon-calendar"></span>
					                 		</span>
					            		</div>			
				            		</div>
							  	</div>
							  	<div class="col-sm-2">
							  		<label for="codneg_cre">%ml.negozio%</label>
									<select class="form-control" id="codneg_cre" name="codneg_cre" >
										<option value="VIL" selected>%ml.villa%</option>
										<option value="BRE">%ml.brembate%</option>
										<option value="TRE">%ml.trezzo%</option>
									</select>			
							  	</div>
							  	<div class="col-sm-2 ui-front">
							  		<div class="control-group" id="numfatt_cre_control_group">
										<label for="numfatt_cre">%ml.numfatt%&nbsp;<small><span class="text-danger" id="numfatt_cre_messaggio"></span></small></label>
										<input class="form-control" id="numfatt_cre" name="numfatt_cre" type="text" onblur="controllaNumeroFattura('numfatt_cre'); controllaClienteFornitore('fornitore_cre','cliente_cre'); "/>
									</div>
							  	</div>
							  	<div class="col-sm-5">
							  		<div class="control-group" id="descreg_cre_control_group">
							    		<label for="descreg_cre">%ml.descreg%&nbsp;<small><span class="text-danger" id="descreg_cre_messaggio"></span></small></label>
										<input class="form-control" id="descreg_cre" name="descreg_cre" type="text" onblur="controllaDescrizione('descreg_cre')"/>
									</div>
							  	</div>
							</div>
							<div class="form-group row">
							  	<div class="col-sm-4">
							  		<div class="control-group" id="causale_cre_control_group">
										<label for="causale_cre">%ml.codcau%&nbsp;<small><span class="text-danger" id="causale_cre_messaggio"></span></small></label>
										<select class="form-control" id="causale_cre" name="causale_cre" >
											<option value=""></option>
											%elenco_causali_cre%
										</select>			
									</div>
							  	</div>
							  	<div class="col-sm-4 ui-front">
							  		<div class="control-group" id="fornitore_cre_control_group">
							    		<label for="fornitore_cre">%ml.codforn%&nbsp;<small><span class="text-danger" id="fornitore_cre_messaggio"></span></small></label>
										<input class="form-control" id="fornitore_cre" name="fornitore_cre" type="text" onblur="aggiungiDettaglioContoFornitore(this.value, 'dettagli_cre'); controllaClienteFornitore('fornitore_cre','cliente_cre'); controllaCausale('causale_cre');">
									</div>	
							  	</div>
							  	<div class="col-sm-4 ui-front">
							  		<div class="control-group" id="cliente_cre_control_group">
							    		<label for="cliente_cre">%ml.codclie%&nbsp;<small><span class="text-danger" id="cliente_cre_messaggio"></span></small></label>
										<input class="form-control" id="cliente_cre" name="cliente_cre" type="text" onblur="aggiungiDettaglioContoCliente(this.value, 'dettagli_cre'); controllaClienteFornitore('fornitore_cre','cliente_cre'); controllaCausale('causale_cre');">
									</div>	
							  	</div>
							</div>						
							<div class="form-group row">
							  	<div class="col-sm-7">
							  		<div class="control-group" id="scadenzesuppl_cre_control_group">
							    		<label for="scadenzesuppl_cre">%ml.datascad%&nbsp;<small><span class="text-danger" id="scadenzesuppl_cre_messaggio"></span></small></label>
										<table class="table table-bordered table-hover" id="scadenzesuppl_cre"></table>
									</div>	
							  	</div>
							</div>
							<div class="form-group row">
							  	<div class="col-sm-12">
							  		<div class="control-group" id="dettagli_cre_control_group">
							    		<label for="dettagli_cre">Dettagli&nbsp;<small><span class="text-danger" id="dettagli_cre_messaggio"></span></small></label>
										<table class="table table-bordered table-hover" id="dettagli_cre"></table>
									</div>	
							  	</div>
							</div>
						</div>
					</form>
	        	
	        	</div>
	        	<div class="modal-footer">
	          		<button type="button" class="btn btn-default" data-dismiss="modal" id="button-ok-nuova-registrazione-form">Ok</button>
	          		<button type="button" class="btn btn-default" id="button-nuova-scadenza-form">Nuova scadenza</button>
	          		<button type="button" class="btn btn-default" id="button-dettaglio-nuova-registrazione-form">Nuovo Dettaglio</button>
	          		<button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
	        	</div>
	      	</div>
		</div>
	</div>
</div>

<div class="container">
	<div class="modal fade" id="nuovo-dettaglio-dialog" role="dialog">
		<div class="modal-dialog">
	      <!-- Modal content-->
			<div class="modal-content">
	        	<div class="modal-header">
	          		<h4 class="modal-title">Nuova dettaglio registrazione</h4>
	        	</div>
	        	<div class="modal-body">
					<form method="post" id="nuovoDettaglioForm" action="../primanota/aggiungiNuovoDettaglioRegistrazioneFacade.class.php?modo=go">
						<div class="well well-sm">
							<div class="form-group row">
							  	<div class="col-xs-4">
				 					<div class='input-group'>
										<span class="input-group-addon"><span class="glyphicon glyphicon-euro"></span></span>
										<input class="form-control" id="newimpdett_cre" name="newimpdett_cre" type="text" maxlength="10" onkeypress="controllaImporto('newimpdett_cre')">
									</div>
							  	</div>
							  	<div class="col-xs-3">
				 					<div class='input-group'>
										<span class="input-group-addon">D/A</span>
										<input class="form-control" id="newsegnodett_cre" name="newsegnodett_cre" type="text" maxlength="1" />
									</div>
							  	</div>							  	
							  	<div class="col-xs-4">
				 					<div class='input-group'>
										<span class="input-group-addon">Cc</span>
										<select class="form-control" id="conti" name="newcontodett_cre"></select>			
									</div>	
							  	</div>							  	
					  		</div>
						</div>					
					</form>	        	
	        	</div>
	        	<div class="modal-footer">
	          		<button type="button" class="btn btn-default" data-dismiss="modal" id="button-ok-nuovodett-nuova-registrazione-form">Ok</button>
	          		<button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
	        	</div>
	      	</div>
		</div>
	</div>
</div>

<div class="container">
	<div class="modal fade" id="nuova-data-scadenza-dialog" role="dialog">
		<div class="modal-dialog">
	      <!-- Modal content-->
			<div class="modal-content">
	        	<div class="modal-header">
	          		<h4 class="modal-title">Nuova data scadenza</h4>
	        	</div>
	        	<div class="modal-body">
					<form method="post" id="nuovaDataScadenzaForm" action="../primanota/aggiungiNuovaScadenzaFornitoreFacade.class.php?modo=go">
						<div class="well well-sm">
							<div class="form-group row">
								<div class="col-xs-4">
									<div class='input-group date' data-provide='datepicker' data-date-format="dd/mm/yyyy">
				                		<input type='text' class="form-control" id="newdatascad_cre" name="newdatascad_cre" />
				                		<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
				            		</div>			
							  	</div>
							  	<div class="col-xs-4">
				 					<div class='input-group'>
										<span class="input-group-addon"><span class="glyphicon glyphicon-euro"></span></span>
										<input class="form-control" id="newimpscad_cre" name="newimpscad_cre" type="text" maxlength="10" onkeypress="controllaImporto('newimpscad_cre')">
									</div>
							  	</div>
					  		</div>
						</div>					
					</form>	        	
	        	</div>
	        	<div class="modal-footer">
	          		<button type="button" class="btn btn-default" data-dismiss="modal" id="button-ok-nuovascad-nuova-registrazione-form">Ok</button>
	          		<button type="button" class="btn btn-default" data-dismiss="modal">Chiudi</button>
	        	</div>
	      	</div>
		</div>
	</div>
</div>

<div class="container">
	<div class="modal fade" id="messaggio-errore-dialog" role="dialog">
		<div class="modal-dialog">
	      <!-- Modal content-->
			<div class="modal-content">
	        	<div class="modal-header">
	          		<h4 class="modal-title"><div class="alert alert-danger" role="alert" >ERRORE</div></h4>
	        	</div>
	        	<div class="modal-body">
		        	<p id="testo-messaggio-errore"></p>
	        	</div>
	        	<div class="modal-footer">
	          		<button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
	        	</div>
	      	</div>
		</div>
	</div>
</div>

<div class="container">
	<div class="modal fade" id="messaggio-successo-dialog" role="dialog">
		<div class="modal-dialog">
	      <!-- Modal content-->
			<div class="modal-content">
	        	<div class="modal-header">
	          		<h4 class="modal-title"><div class="alert alert-success" role="alert" >SUCCESSO</div></h4>
	        	</div>
	        	<div class="modal-body">
		        	<p id="testo-messaggio-successo"></p>
	        	</div>
	      	</div>
		</div>
	</div>
</div>
